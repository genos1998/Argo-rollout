apiVersion: v1
kind: ConfigMap
metadata:
  name: job412-analysis-config
data:
  providerConfig: |
    application: job412
    lifetimeMinutes: 3
    gitops: TRUE
    passScore: 90
    serviceList: 
    - logScopeVariables: "kubernetes.pod_name"
      baselineLogScope: ".*{{env.STABLE_POD_HASH}}.*"
      canaryLogScope: ".*{{env.LATEST_POD_HASH}}.*"
      logTemplateName: "elasticasy-verifier"
      metricTemplateName: "promy"
      metricScopeVariables: "${namespace_key},${pod_key}"
      baselineMetricScope: "argocd,{{env.STABLE_POD_HASH}}"
      canaryMetricScope: "argocd,{{env.LATEST_POD_HASH}}"
    - metricTemplateName: "promxy-global"
      metricScopeVariables: "${namespace_key},${pod_key}"
      baselineMetricScope: "argocd,.*{{env.STABLE_POD_HASH}}.*"
      canaryMetricScope: "argocd,.*{{env.LATEST_POD_HASH}}.*"
    - metricTemplateName: "prometheus-app-health-generic-min"
      metricScopeVariables: "${namespace_key},${pod_key},${app_name}"
      baselineMetricScope: "argocd,.*{{env.STABLE_POD_HASH}}.*,job412"
      canaryMetricScope: "argocd,.*{{env.LATEST_POD_HASH}}.*,job412"
